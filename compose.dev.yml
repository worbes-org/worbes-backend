services:
  worbes-api:
    container_name: worbes-api-dev
    image: aprileaf/worbes-api:dev
    ports:
      - "8080:8080"
      - "9292:9292"
    env_file: .env.dev
    command: ["java", "-Xmx256m", "-Xms128m", "-XX:+UseContainerSupport", "-XX:MaxMetaspaceSize=256m", "-XX:+ExitOnOutOfMemoryError", "-jar", "worbes-api.jar"]
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        compress: "true"

  worbes-batch:
    container_name: worbes-batch-dev
    image: aprileaf/worbes-batch:dev
    ports:
      - "8080:8080"
      - "9292:9292"
    env_file: .env.dev
    command: ["java", "-Xmx256m", "-Xms128m", "-XX:+UseContainerSupport", "-XX:MaxMetaspaceSize=256m", "-XX:+ExitOnOutOfMemoryError", "-jar", "worbes-batch.jar"]
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        compress: "true"
